var GUI=function(a){function b(a){this.options=e.defaults(a||{},h),this.render(this.options)}var c=a("Handlebars"),d=a("$"),e=a("_"),f=a("Backbone");this.Templates=this.Templates||{},this.Templates["src/ad-display/template.html"]=c.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n	    <a class="mtvn-ad-gui-learn-more" href="',(d=c.buttonLink)?d=d.call(a,{hash:{},data:b}):(d=a.buttonLink,d=typeof d===i?d.apply(a):d),e+=j(d)+'" target="',(d=c.buttonTarget)?d=d.call(a,{hash:{},data:b}):(d=a.buttonTarget,d=typeof d===i?d.apply(a):d),e+=j(d)+'">\n	    	',(d=c.buttonText)?d=d.call(a,{hash:{},data:b}):(d=a.buttonText,d=typeof d===i?d.apply(a):d),e+=j(d)+"\n	    </a>\n	    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<div class="mtvn-ad-gui">\n	<div class="mtvn-ad-gui-container">\n	    <span class="mtvn-ad-gui-countdown"></span>\n	    ',g=c["if"].call(b,b.buttonLink,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n	</div>\n</div>"}),this.Templates["src/controls/template.html"]=c.template(function(a,b,c,d,e){function f(){return'\n<div class="mtvn-controls-live mtvn-controls-button"></div>\n'}function g(){return'\n<div class="mtvn-controls-play-pause mtvn-controls-button"></div>\n'}function h(){return'\n<div class="mtvn-controls-mute mtvn-controls-button"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k=this,l="function",m=this.escapeExpression;return j+="<!-- controls -->\n",i=c["if"].call(b,b.live,{hash:{},inverse:k.program(3,g,e),fn:k.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='\n<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'">\n	<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-time-display"></div>\n	<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-progress-container">\n		<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-buffered"></div>\n		<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-progress"></div>\n	</div>\n	<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-background"></div>\n	<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-thumb-container" style="left:0px;">\n		<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-tool-tip-container">\n			<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-tool-tip-background"></div>\n			<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-tool-tip-time"></div>\n		</div>\n		<div class="',(i=c.slider)?i=i.call(b,{hash:{},data:e}):(i=b.slider,i=typeof i===l?i.apply(b):i),j+=m(i)+'-thumb"/>\n	</div>\n</div>\n',i=c["if"].call(b,b.showVolume,{hash:{},inverse:k.noop,fn:k.program(5,h,e),data:e}),(i||0===i)&&(j+=i),j+='\n<div class="mtvn-controls-fullscreen mtvn-controls-button"></div>'});var g=this.Templates["src/ad-display/template.html"],h={countdownText:"Your content will resume in {{time}}.",messageText:"Your content will resume shortly.",buttonText:"Learn More",buttonTarget:"_blank"};b.prototype={render:function(a){var b=a.template||g,c=this.$el=d(b(a));return this.$countdown=c.find(".mtvn-ad-gui-countdown"),this.renderMessage(a.time),c},renderMessage:function(a){var b=this.options[e.isUndefined(a)?"messageText":"countdownText"],c=e.template(b,{time:a},{interpolate:/\{\{(.+?)\}\}/g});this.$countdown.text(c)}};var i=function(){var a="ontouchstart"in window||"onmsgesturechange"in window;return{isTouchDevice:a,getClientX:a?function(a){return a.originalEvent.touches[0].clientX}:function(a){return a.clientX},getClientY:a?function(a){return a.originalEvent.touches[0].clientY}:function(a){return a.clientY},invokeIfNumber:function(a,b){isNaN(b)&&parseFloat(b,10),isNaN(b)||(console.log("INVOKE~~~ util.js:21 n",b),a(b))},formatTime:function(a){if(isNaN(a))return"00:00";var b=Math.round(a/3600),c=Math.round(a%3600/60),d=Math.round(a%3600%60);return(0===b?"":10>b?"0"+b+":":b+":")+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}}}(),j=function(){var a=this.Templates["src/controls/template.html"],b={slider:"mtvn-controls-slider",playPause:"mtvn-controls-play-pause"};return f.View.extend({tagName:"div",className:"mtvn-controls",events:{"click .mtvn-controls-volume":"onVolume","click .mtvn-controls-fullscreen":"onFullscreen"},initialize:function(){e.bindAll(this,"onSeek","sendEvent"),e.extend(this.options,{slider:b.slider}),this.render()},render:function(){var c=this.options;this.$el.html(d(a(c))),this.playPauseButton=new l({el:this.$el.find("."+b.playPause),paused:c.paused}),this.listenTo(this.playPauseButton,k.PLAY,this.sendEvent),this.listenTo(this.playPauseButton,k.PAUSE,this.sendEvent),this.slider=new m({el:this.$el.find("."+b.slider),playhead:c.playhead,duration:c.duration}),this.listenTo(this.slider,k.SEEK,this.onSeek),this.volumeButton=new n({el:this.$el}),this.listenTo(this.volumeButton,k.MUTE,this.sendEvent),this.listenTo(this.volumeButton,k.UNMUTE,this.sendEvent)},setPaused:function(a){this.playPauseButton.setPaused(a)},getPlayhead:function(){return this.slider.playhead},setPlayhead:function(a){this.slider.setPlayhead(a)},setBuffered:function(a){this.slider.setBuffered(a)},setDuration:function(a){this.slider.setDuration(a)},sendEvent:function(a,b){this.trigger(a,{type:a,target:this,data:b})},onSeek:function(a){this.sendEvent(k.SEEK,a)},onVolume:function(a){this.sendEvent(k.VOLUME,a)},onFullscreen:function(){this.sendEvent(k.FULLSCREEN)}})}(),k={PLAY:"PLAY",PAUSE:"PAUSE",FULLSCREEN:"FULLSCREEN",MUTE:"MUTE",UNMUTE:"UNMUTE",SEEK:"SEEK"},l=function(){var a={play:"mtvn-controls-play",pause:"mtvn-controls-pause"};return f.View.extend({initialize:function(){this.$el.addClass(this.options.paused?a.play:a.pause)},events:{click:"toggle"},setPaused:function(b){var c=this.$el;c.toggleClass(a.play,b),c.toggleClass(a.pause,!b)},toggle:function(){var b=this.$el,c=b.hasClass(a.pause),d=c?k.PAUSE:k.PLAY;b.toggleClass(a.play,c),b.toggleClass(a.pause,!c),this.trigger(d,d)}})}(),m=function(){var a="mtvn-controls-slider-thumb",b="mtvn-controls-slider-thumb-active",c={platformInitialize:function(){},events:{"touchstart .mtvn-controls-slider-thumb-container":"onThumbActive","touchmove .mtvn-controls-slider-thumb-container":"onThumbMove","touchend .mtvn-controls-slider-thumb-container":"onThumbInactive"}},g={platformInitialize:function(){e.bindAll(this,"onThumbMove","onThumbInactive");var a=d(document);this.listenTo(a,"mousemove",this.onThumbMove),this.listenTo(a,"mouseup",this.onThumbInactive)},events:{"mousedown .mtvn-controls-slider-thumb-container":"onThumbActive"}};return f.View.extend({dragging:!1,duration:0,playhead:0,sliderWidth:0,initialize:function(){e.bindAll(this,"setSliderWidth"),e.extend(this,i.isTouchDevice?c:g),this.platformInitialize(),this.render(),this.$thumbContainer=this.$el.find(".mtvn-controls-slider-thumb-container"),this.$progress=this.$el.find(".mtvn-controls-slider-progress"),this.$buffered=this.$el.find(".mtvn-controls-slider-buffered"),this.$timeDisplay=this.$el.find(".mtvn-controls-slider-time-display"),this.$toolTipContainer=this.$el.find(".mtvn-controls-slider-tool-tip-container"),this.$toolTipContainer.hide(),this.$toolTipTime=this.$el.find(".mtvn-controls-slider-tool-tip-time"),this.setDuration(this.options.duration),this.setPlayhead(this.options.playhead),this.setSliderWidth=e.throttle(this.setSliderWidth,3e3)},setPlayhead:function(a){this.dragging||this.seeking||(isNaN(a)&&(a=parseFloat(a,10)),isNaN(a)||(this.setSliderWidth(),this.playhead=Math.max(0,Math.min(a,this.duration)),this.moveThumb(this.getLeftFromPlayhead(a)),this.updateTime()))},setBuffered:function(a){if(!this.dragging&&!this.seeking&&this.duration>1){var b=Math.max(0,this.getLeftFromPlayhead(a));b=Math.min(b,this.sliderWidth),this.$buffered.css({width:b})}},setDuration:function(a){isNaN(a)&&(a=parseFloat(a,10)),isNaN(a)||(this.duration=a,this.updateTime())},setEnabled:function(a){a!==this.enabled&&(a?(this.$thumbContainer.show(),this.$timeDisplay.css({visibility:"visible"}),this.$buffered.show(),this.$progress.show()):(this.$thumbContainer.hide(),this.$timeDisplay.css({visibility:"hidden"}),this.$progress.hide(),this.$buffered.hide())),this.enabled=a},onThumbActive:function(c){c.preventDefault();var d=this.$el.find("."+a);d.removeClass(a),d.addClass(b),this.dragging=!0,this.setSliderWidth(),this.$buffered.css({width:0}),this.$toolTipTime.html(i.formatTime(this.playhead)),this.$toolTipContainer.show()},onThumbMove:function(a){if(this.dragging){a.preventDefault();var b=i.getClientX(a);this.containerOffset||(this.containerOffset=this.$el.offset().left),this.moveThumb(b-this.containerOffset)}},onThumbInactive:function(c){if(this.dragging){c.preventDefault();var d=this.$el.find("."+b);d.removeClass(b),d.addClass(a),this.dragging=!1,this.sendSeek(),this.$toolTipContainer.hide()}},moveThumb:function(a){var b=Math.max(0,a);b=Math.min(b,this.sliderWidth),this.$thumbContainer.css({left:b}),this.$progress.css({width:b}),this.$toolTipTime.html(i.formatTime(this.getTimeFromThumb(b)))},setSliderWidth:function(){this.sliderWidth=this.$el[0].offsetWidth},getLeftFromPlayhead:function(a){if(!a)return 0;var b=a/Math.max(1,this.duration);return b*this.sliderWidth},getTimeFromThumb:function(a){isNaN(a)&&(a=parseFloat(this.$thumbContainer.css("left"),10));var b=a/this.sliderWidth;return b*this.duration},updateTime:function(){this.$timeDisplay.html(this.getTimeDisplayText())},getTimeDisplayText:function(){return'<span class="mtvn-controls-slider-current-time">'+i.formatTime(this.playhead)+"</span> / "+i.formatTime(this.duration)},sendSeek:function(){var a=this.playhead=this.getTimeFromThumb();this.updateTime(),this.trigger(k.SEEK,a)}})}(),n=function(){var a={unmute:"mtvn-controls-unmute",mute:"mtvn-controls-mute"};return f.View.extend({events:{"click .mtvn-controls-unmute":"onUnmute","click .mtvn-controls-mute":"onMute"},onUnmute:function(){var b=this.$el.find("."+a.unmute);b.removeClass(a.unmute),b.addClass(a.mute),this.trigger(k.UNMUTE,k.UNMUTE)},onMute:function(){var b=this.$el.find("."+a.mute);b.removeClass(a.mute),b.addClass(a.unmute),this.trigger(k.MUTE,k.MUTE)}})}();return{AdDisplay:b,Controls:j,Events:k,version:"0.3.0",build:"07/23/2013 11:29:58 AM"}}(MTVNPlayer.require);